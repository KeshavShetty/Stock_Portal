<html>
<head>
  <title>Option Price Spikes View</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>


<div id="container1" style="min-width: 310px; height: 700px; margin: 0 auto; border-style: solid;"></div>

<script type='text/javascript'>

	function getQueryParameter(name){
	  const parts = window.location.href.split('?');
	  if (parts.length > 1) {
	    name = encodeURIComponent(name);
	    const params = parts[1].split('&');
	    const found = params.filter(el => (el.split('=')[0] === name) && el);
	    if (found.length) return decodeURIComponent(found[0].split('=')[1]);
	  }
	}
	
	var forDate = getQueryParameter("forDate");
	var indexName = getQueryParameter("indexName");
	
	Highcharts.chart('container1', {
	  chart: {
	    type: 'spline'
	  },
	  title: {
	    text: indexName + ' Delta Neutral Option Price Disparity'
	  },
	  subtitle: {
	    text: 'ATM or OTM Delta Neutral Price disparity on ' + forDate
	  },
	  yAxis: [{ // Primary yAxis
          labels: {
              format: '{value}'
          },
          opposite: true,
          title: {
              text: 'Index'
          }
      }, { // Secondary yAxis
          gridLineWidth: 0,
          
          labels: {
              format: '{value}'
          },title: {
              text: 'Put to Call Price Ratio'
          }
      }],
	  data: {
	    csvURL: 'http://localhost/portal/chart/OptionDeltaNutralPriceDisparityChartQuote?indexName=' + indexName + '&forDate='+forDate,
	    enablePolling: true,
	    dataRefreshRate: 60
	  },
	  series: [
		  { yAxis: 0},{ yAxis: 1},{ yAxis: 1},{ yAxis: 1},{ yAxis: 1},{ yAxis: 1},{ yAxis: 1}
		 ]
	});
  </script>
</body>
</html>